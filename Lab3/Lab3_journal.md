# Lab3
## Задание
### Базовое:
1. [] Создать в среде CassandraDb свое пространство ключей. Определить семейство столбцов по теме, выданной преподавателем.
2. [] Продемонстрировать добавление, изменение и удаление данных в БД, используя команды API
и/или язык Cassandra Query Language.
3. [] Продемонстрировать (вывести на экран) содержимое БД.
4. [] Создать второе семейство столбцов по той же теме, определить для них распределительный и кластерный индексы.
5. [] Определить для семейства столбцов индекс(ы). Выполнить запросы с фильтрацией по ключам и индексам.
Продемонстрировать работу allow filtering.
6. [] Выполнить запросы к базе данных с селекцией и проекцией.
Выполнить запрос с использованием скалярных и агрегатных функций.
7. [] Добавить строку с указанием TTL, продемонстрировать действие TTL.
### Расширенное:
8. [] Выполнить запросы с группировкой и сортировкой данных.
9. [] Продемонстрировать усечение таблицы и удаление таблицы/индекса.
10. [] Продемонстрировать создание пакета запросов.
### Дополнительное:
11. [] Создать материализованное представление. Продемонстрировать работу с ним.
12. [] Продемонстрировать изменение и удаление данных в БД, используя условия IF для Update и Delete.

## Контрольные вопросы
1. Особенности, модель данных и функциональные возможности колоночных СУБД?

Основная идея колоночных СУБД — это хранение данных не по строкам, как это делают традиционные СУБД, а по колонкам.
Это означает, что с точки зрения SQL- клиента данные представлены как обычно в виде таблиц, но физически эти таблицы
являются совокупностью колонок, каждая из которых по сути представляет собой таблицу из одного поля.
При этом физически на диске значения одного поля хранятся последовательно друг за другом — приблизительно так:
[A1, A2, A3], [B1, B2, B3], [C1, C2, C3] и т.д.

Такая организация данных приводит к тому, что при выполнении SELECT в котором фигурируют только 3 поля из 50 полей таблицы,
с диска физически будут прочитаны только 3 колонки. Это означает что нагрузка на канал ввода-вывода будет
приблизительно в 50/3=17 раз меньше, чем при выполнении такого же запроса в традиционной СУБД.

В сравнении с хранением данных в строках, как в большинстве реляционных баз данных,
преимущества хранения в колонках заключаются в быстром поиске/доступе и агрегации данных.
Реляционные базы данных хранят каждую строку как непрерывную запись на диске. Разные строки хранятся в
разных местах на диске, в то время как колоночные базы данных хранят все ячейки, относящиеся к колонке,
как непрерывную запись, что делает операции поиска/доступа быстрее.

2. Что такое пространство ключей, семейство столбцов, строка, столбец и суперстолбец?

- Столбец - ячейка с данными, включающая 3 части – имя (column name) в виде массива байтов, метку времени (timestamp) и
само значение (value) также в виде байтового массива.
С каждым значением связана метка времени — задаваемое пользователем
64-битное число, которое используется для разрешения конфликтов во время записи: чем оно больше, тем новее считается столбец.
Это учитывается при удалении старых колонок.
- Пространство ключей (keyspace) – группа из нескольких семейств столбцов,
  собранных вместе. Оно логически группирует семейства столбцов и обеспечивает
  изолированные области имён.
- Строка или запись (row) – именованная коллекция столбцов;
- Семейство столбцов (column family) – именованная коллекция строк;

3. Что такое ключи и индексы? Как их объявлять и использовать? Отличия распределительного и кластерного индексов?
4. Функциональные возможности и языки запросов для СУБД Cassandra?
5. Типы данных и TTL в СУБД Cassandra?
6. Возможности и конструкции для определения данных, работы с данными и
запросами в СУБД Cassandra?
7. Технология репликации и фрагментации в СУБД Cassandra? Как организован
и работает кластер?
8. Уровни согласованности данных в СУБД Cassandra?

- One - возвращается запись из ближайшей реплики, даже если она устарела, и обновляет её, чтобы при
следующем чтении были актуальные значения.
- Quorum - на запрос должны ответить большинство узлов, и вернётся с новейшей
  меткой времени. Те реплики, в которых данные устарели, будут обновлены.
  В случае записи - сначала информация должна быть размножена по большинству
  (более половине, а конкретно round(N/2) + 1)
  узлов, прежде чем признается успешной.
- Local Quorum - собирается кворум узлов в датацентре, где происходит
  координация.
- Each Quorum - собирается кворум узлов в каждом датацентре, где происходит
  координация. Только после успешного ответа в каждом, операция считается
  успешной.
- Two - координатор шлёт запрос к двум ближайшим узлам.
- Three - координатор шлёт запрос к двум ближайшим узлам.
- All - аналогично Quorum, но должны ответить **все** узлы. Уязвимо к выводу из
  строя: хотя бы один узел откажет и ни один запрос не будет работать.

9. Восстановление данных в СУБД Cassandra?
10. Запись на диск и уплотнение данных в СУБД Cassandra?
11. Поддержка транзакций в СУБД Cassandra?
12. Что такое материализованное представление и как с ним работать?
